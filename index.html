<script>
window.onmousemove = (e) => {
    window.x = e.pageX
    window.y = e.pageY
}
if (localStorage.getItem("incognito") === "true") {
    window.incognito = true
}
else if (localStorage.getItem("incognito") === "false") {
    window.incognito = false
}
  
navigator.permissions.query({name: "notifications"}).then((state) => {
    if (state.state === "denied" && window.incognito === undefined) {
        document.write("Can not determine if you are in incognito mode or not (notifications permission is set to block. Clear your site settings)")
    }
    else {
        Notification.requestPermission().then((state) => {
            if (state !== "denied") {
                window.incognito = false
            }
            else {
                setTimeout(function() {
                    if (window.x < 400 && window.y < 95) {
                        window.incognito = false
                    }
                    else {
                        window.incognito = true
                    }
                    localStorage.setItem("incognito", window.incognito)
                    if (window.incognito) {
                        document.write("You are in incognito mode")
                    }
                    else {
                        document.write("You are not in incognito mode")
                    }
                }, 500)
            }
        })
    }
})

</script>
